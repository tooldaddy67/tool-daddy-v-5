# Local Testing Guide - reCAPTCHA & Google Analytics

## Prerequisites
- Dev server running: `npm run dev`
- Browser open to: `http://localhost:3000`

---

## Test 1: Google Analytics (GA4)

### Step 1: Open Google Analytics Dashboard
1. Go to https://analytics.google.com
2. Select your **Tool Daddy** property
3. Navigate to: **Reports** â†’ **Realtime**
4. Keep this tab open

### Step 2: Visit Your Local Site
1. Open a new tab
2. Go to: `http://localhost:3000`
3. Navigate around:
   - Click on different tools
   - Visit `/about` page
   - Try 2-3 different tool pages

### Step 3: Verify Tracking (in GA4 Realtime)
Within 30 seconds, you should see:
- âœ… **1 active user** (you!)
- âœ… **Page views** listed in the events
- âœ… **Page paths** showing (e.g., `/`, `/about`, `/image-converter`)

### Step 4: Check Browser Console
1. Press `F12` in your browser
2. Go to **Console** tab
3. Look for these messages:
   - `âœ… GTM-P2725PBH` (Google Tag Manager loaded)
   - No errors related to `gtag` or `analytics`

**PASS CRITERIA**: You see yourself in GA4 Realtime + no console errors

---

## Test 2: reCAPTCHA v3

### Step 1: Check reCAPTCHA Badge
1. Visit: `http://localhost:3000`
2. Look at the **bottom-right corner** of the page
3. You should see a small **reCAPTCHA badge** (floating)
   - Says "protected by reCAPTCHA"
   - Has Google logo

**PASS CRITERIA**: Badge is visible âœ…

### Step 2: Test AI Text Humanizer (Rate Limited Feature)
1. Go to: `http://localhost:3000/ai-text-humanizer`
2. **Open Browser DevTools** (`F12`)
3. Go to **Console** tab
4. Enter some text in the input field
5. Select a mode (Formal, Casual, etc.)
6. Click **Humanize Text**

### Step 3: Check Network Request
1. Switch to **Network** tab in DevTools
2. Look for a request to: `/api/verify-recaptcha`
   - **Status should be**: `200 OK` âœ…
   - **Response should include**: `{"success": true, "score": 0.X}`

### Step 4: Verify Console Logs
In the **Console** tab, you should see:
- âœ… `Google reCAPTCHA loaded`
- âœ… No errors about "reCAPTCHA site key not found"
- âœ… No 403/401 errors

**PASS CRITERIA**: reCAPTCHA verification succeeds + no errors

---

## Test 3: Check Environment Variables Loaded

### Open Browser Console (`F12`)
Run these commands to verify:

```javascript
// Test 1: Check if GA4 ID is loaded
console.log('GA ID loaded:', document.querySelector('script[src*="gtag"]') !== null);

// Test 2: Check if reCAPTCHA badge exists
console.log('reCAPTCHA badge:', document.querySelector('.grecaptcha-badge') !== null);
```

**Expected Output**:
```
GA ID loaded: true
reCAPTCHA badge: true
```

---

## Test 4: Full AI Feature Test

### Test AI Text Humanizer (Complete Flow)

1. **Visit**: `http://localhost:3000/ai-text-humanizer`
2. **Input text**: 
   ```
   This is a test generated by AI to check if the humanizer works properly.
   ```
3. **Select mode**: Casual
4. **Click**: "Humanize Text"
5. **Expected result**:
   - âœ… Loading spinner appears
   - âœ… After 3-5 seconds, humanized text appears
   - âœ… No error messages
   - âœ… Text is rewritten in casual tone

**If you get an error**, check:
- reCAPTCHA score too low (unlikely in dev)
- API key issues (Gemini)
- Rate limit hit (wait 1 minute)

---

## Test 5: AI Playlist Maker

1. **Visit**: `http://localhost:3000/ai-playlist-maker`
2. **Input**: `rock music from the 90s`
3. **Click**: "Generate Playlist"
4. **Expected result**:
   - âœ… Loading state
   - âœ… Playlist generated with song titles
   - âœ… No errors

---

## Common Issues & Solutions

### Issue 1: "reCAPTCHA badge not showing"
**Solution**: 
- Check `.env.local` has `NEXT_PUBLIC_RECAPTCHA_SITE_KEY`
- Restart dev server: `Ctrl+C` â†’ `npm run dev`

### Issue 2: "GA not tracking in Realtime"
**Solution**:
- Wait 30-60 seconds (sometimes delayed)
- Check `.env.local` has `NEXT_PUBLIC_GA_ID=G-95Z6VMSH51`
- Hard refresh browser: `Ctrl + Shift + R`

### Issue 3: "AI features returning errors"
**Solution**:
- Check Gemini API keys in `.env.local`
- Check reCAPTCHA is working first
- Look at Network tab for specific error

### Issue 4: "Environment variables not loading"
**Solution**:
- **MUST restart dev server** after changing `.env.local`
- Stop: `Ctrl + C`
- Start: `npm run dev`
- Hard refresh browser

---

## Quick Test Checklist

Run through this 5-minute test:

- [ ] Open `http://localhost:3000`
- [ ] See reCAPTCHA badge (bottom-right)
- [ ] Open GA4 Realtime dashboard
- [ ] Navigate to 3 different pages
- [ ] See yourself in GA4 within 30 seconds
- [ ] Go to `/ai-text-humanizer`
- [ ] Submit a test humanization
- [ ] Check Network tab: `/api/verify-recaptcha` returns 200
- [ ] Verify humanized text appears
- [ ] No errors in Console

**All checked?** âœ… Everything is working!

---

## Advanced: Check All Tools

Quick test of each tool group:

### Media Tools (No Auth Required)
- [ ] Image Compressor
- [ ] Image Converter
- [ ] Video to Audio
- [ ] QR Code Generator
- [ ] Password Generator
- [ ] Metadata Extractor

### Firebase Tools (Requires Auth)
- [ ] Todo List (sign in first)
- [ ] Simple Notepad
- [ ] Drawing Canvas

### AI Tools (Requires reCAPTCHA)
- [ ] AI Text Humanizer
- [ ] AI Playlist Maker

### External Redirects
- [ ] YouTube Downloader (shows ad modal â†’ redirects)
- [ ] YouTube to Audio (shows ad modal â†’ redirects)
- [ ] AI Image Enhancer (shows ad modal â†’ redirects)

---

**Ready to test?** Start with the Quick Test Checklist above! ðŸ§ª
